var dateFormat=function(){var a=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,b=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,d=/[^-+\dA-Z]/g,e=function(c,g){c=String(c);for(g=g||2;c.length<g;)c="0"+c;return c};return function(c,g,j){var f=$("#locale").val();f=="de_DE"||f=="en_GB"||f=="en_US"||f=="ne_ES"||f=="es_MX"||f=="fr_FR"||f=="it_IT"||f=="nl_NL"||f=="pt_BR"||(f="en_US");var i=dateFormat;
if(arguments.length==1&&Object.prototype.toString.call(c)=="[object String]"&&!/\d/.test(c)){g=c;c=undefined}c=c?new Date(c):new Date;if(isNaN(c))throw SyntaxError("invalid date");g=String(i.masks[g]||g||i.masks["default"]);if(g.slice(0,4)=="UTC:"){g=g.slice(4);j=true}var h=j?"getUTC":"get",l=c[h+"Date"](),p=c[h+"Day"](),m=c[h+"Month"](),q=c[h+"FullYear"](),k=c[h+"Hours"](),r=c[h+"Minutes"](),s=c[h+"Seconds"]();h=c[h+"Milliseconds"]();var o=j?0:c.getTimezoneOffset(),t={d:l,dd:e(l),ddd:i.i18n["dayNames_"+
f][p],dddd:i.i18n["dayNames_"+f][p+7],m:m+1,mm:e(m+1),mmm:i.i18n["monthNames_"+f][m],mmmm:i.i18n["monthNames_"+f][m+12],yy:String(q).slice(2),yyyy:q,h:k%12||12,hh:e(k%12||12),H:k,HH:e(k),M:r,MM:e(r),s:s,ss:e(s),l:e(h,3),L:e(h>99?Math.round(h/10):h),t:k<12?"a":"p",tt:k<12?"am":"pm",T:k<12?"A":"P",TT:k<12?"AM":"PM",Z:j?"UTC":(String(c).match(b)||[""]).pop().replace(d,""),o:(o>0?"-":"+")+e(Math.floor(Math.abs(o)/60)*100+Math.abs(o)%60,4),S:["th","st","nd","rd"][l%10>3?0:(l%100-l%10!=10)*l%10]};return g.replace(a,
function(n){return n in t?t[n]:n.slice(1,n.length-1)})}}();dateFormat.masks={"default":"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"};
dateFormat.i18n={dayNames_en_US:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames_en_US:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"],dayNames_es_ES:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames_es_ES:["Jan",
"Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"],dayNames_de_DE:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames_de_DE:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"],
dayNames_en_GB:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames_en_GB:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"],dayNames_es_MX:["Do","Lu","Ma","Mi","Ju","Vi","S\u00e1","Domingo","Lunes","Martes","Mi\u00e9rcoles","Jueves","Viernes","S\u00e1bado"],monthNames_es_MX:["Ene","Feb","Mar",
"Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic","Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],dayNames_fr_FR:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames_fr_FR:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"],dayNames_it_IT:["Sun",
"Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames_it_IT:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"],dayNames_nl_NL:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames_nl_NL:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug",
"Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"],dayNames_pt_BR:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames_pt_BR:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]};
Date.prototype.format=function(a,b){return dateFormat(this,a,b)};function getSearchLocation(){return sessionStorage.getItem("SESSION_STORAGE_SEARCH_LOCATION")}function setSearchLocation(a){sessionStorage.setItem("SESSION_STORAGE_SEARCH_LOCATION",a)}function getDistanceUnitCache(){return sessionStorage.getItem("SESSION_STORAGE_DISTANCE_UNIT")}function setDistanceUnitCache(a){sessionStorage.setItem("SESSION_STORAGE_DISTANCE_UNIT",a)}function getSearchDateText(){var a=getSearchDate();return a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate()}
function getSearchDateTextColon(){var a=getSearchDate();return a.getFullYear()+":"+(a.getMonth()+1)+":"+a.getDate()}function setMovieTime(a){sessionStorage.setItem("SESSION_STORAGE_MOVIE_TIME",a)}function getMovieTime(){return sessionStorage.getItem("SESSION_STORAGE_MOVIE_TIME")}function setSearchDate(a){a=a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate();localStorage.setItem("LOCAL_STORAGE_SEARCH_DATE",a)}
function getSearchDate(){var a=localStorage.getItem("LOCAL_STORAGE_SEARCH_DATE").split("-"),b=new Date;b.setFullYear(parseInt(a[0]),parseInt(a[1])-1,parseInt(a[2]));b.setHours(0,0,1,0);return b}function getMovieTabStatus(){var a=CommonUtil.getValidString(sessionStorage.getItem(getMovieTabCacheKey()));if(""==a)a="THEATER";return a}function setMovieTabStatus(a){sessionStorage.setItem(getMovieTabCacheKey(),a)}
function clearMovieSearchData(){sessionStorage.removeItem(getMovieTabCacheKey());sessionStorage.removeItem(getMovieListCacheKey());sessionStorage.removeItem(getTheaterListCacheKey());localStorage.removeItem(getCurrentMovieCacheKey());localStorage.removeItem(getCurrentTheaterCacheKey());localStorage.removeItem(getCurrentScheduleCacheKey());sessionStorage.removeItem("SESSION_STORAGE_MOVIE_TIME");localStorage.removeItem("LOCAL_STORAGE_DEFAULTSCHEDULE");localStorage.removeItem("LOCAL_STORAGE_SCHEDULE_DATE")}
function setFlagBeforeGoToSchedule(){sessionStorage.setItem(getViewedSchedulePageFlagKey(),true)}function cleanViewedSchedulePageFlag(){sessionStorage.removeItem(getViewedSchedulePageFlagKey())}function getViewedSchedulePageFlagKey(){return"SESSION_STORAGE_VIEWED_SCHEDULE_FLAG"}
function isBackFromSchedulePage(){var a=sessionStorage.getItem(getViewedSchedulePageFlagKey());CommonUtil.debug(" flag = "+a);if(!a||a==""){CommonUtil.debug(" flag = false");return false}else{CommonUtil.debug(" flag = true");return true}}function getMovieTabCacheKey(){return"SESSION_STORAGE_MOVIETAB"}function isTheaterTabOn(){return"THEATER"==getMovieTabStatus()?true:false}function getCurrentMovieCacheKey(){return"LOCAL_STORAGE_CURRENTMOVIE"}
function getCurrentTheaterCacheKey(){return"LOCAL_STORAGE_CURRENTTHEATER"}function getCurrentScheduleCacheKey(){return"LOCAL_STORAGE_CURRENTSCHEDULE"}function setCurrentMoive(a){localStorage.setItem(getCurrentMovieCacheKey(),a)}function getCurrentMovie(){return localStorage.getItem(getCurrentMovieCacheKey())}function setCurrentTheater(a){localStorage.setItem(getCurrentTheaterCacheKey(),a)}function getCurrentTheater(){return localStorage.getItem(getCurrentTheaterCacheKey())}
function setCurrentSchedule(a){localStorage.setItem(getCurrentScheduleCacheKey(),a)}function getCurrentSchedule(){return localStorage.getItem(getCurrentScheduleCacheKey())}function setDefaultSchedule(a){localStorage.setItem("LOCAL_STORAGE_DEFAULTSCHEDULE",a)}function getDefaultSchedule(){return localStorage.getItem("LOCAL_STORAGE_DEFAULTSCHEDULE")}function setScheduleDate(a){a=a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate();localStorage.setItem("LOCAL_STORAGE_SCHEDULE_DATE",a)}
function getScheduleDate(){var a=localStorage.getItem("LOCAL_STORAGE_SCHEDULE_DATE").split("-"),b=new Date;b.setFullYear(parseInt(a[0]),parseInt(a[1])-1,parseInt(a[2]));b.setHours(0,0,1,0);return b}function getScheduleDateText(){var a=getScheduleDate();return a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate()}function getTheaterAddressText(a){a=a.address;return a.firstLine+" "+a.city+" ,"+a.state+" "+a.zip}function MovieItem(a,b){this.id=a;this.name=b}
function TheaterItem(a,b,d){this.id=a;this.name=b;this.addressDisplay=d}function ScheduleItem(a,b,d,e){this.movieId=a;this.theaterId=b;this.showTimes=d;this.ticketURI=e}function convertTimeFormatToDisplay(a){a=a.split(":");var b=a[0]%24,d="";if(b==0)d="12:"+a[1]+"am";else if(b==12)d="12:"+a[1]+"pm";else if(b<12)d=b+":"+a[1]+"am";else{b-=12;d=b+":"+a[1]+"pm"}return d}
function getFormatedShowTimes(a){if(""==a)return"";var b=(new Date).format("HH:MM:ss");a=a.split(";");for(var d,e=false,c="",g=a.length,j,f=getDaysDiff(new Date,getSearchDate()),i=0;i<g;i++){d=compareTime(a[i],b);j=convertTimeFormatToDisplay(a[i]);if(d<=0&&f==0)c+='<SPAN class="clsPassedShowTime">'+j+"</SPAN>";else if(e)c+=j;else{e=true;c+='<SPAN class="clsFontColor_nextAvailableShowTime">'+j+"</SPAN>"}if(i!=g-1)c+=" | "}return c}
function compareTime(a,b){var d=0,e=milOfTime(a),c=milOfTime(b);if(e>c)d=1;else if(c>e)d=-1;return d}function milOfTime(a){var b=a.split(":");a=parseInt(b[0],10);b=parseInt(b[1],10);return(new Date(2007,0,1,a,b,0)).getTime()}function getDaysDiff(a,b){var d=new Date(a),e=new Date(b);d.setHours(0,0,1,0);e.setHours(0,0,1,0);d=e.getTime()-d.getTime();return parseInt(d/864E5)}function setConfirmEmailCache(a){localStorage.setItem(getConfirmEmailCacheKey(),a)}
function getConfirmEmailCacheKey(){return"LOCAL_STORAGE_COMFIRM_EMAIL"}function getConfirmEmailCache(){return localStorage.getItem(getConfirmEmailCacheKey())}function setMovieTheaterPageCache(a){sessionStorage.setItem(getMovieTheaterPageCacheKey(),a)}function getMovieTheaterPageCache(){return sessionStorage.getItem(getMovieTheaterPageCacheKey())}function cleanMovieTheaterPageCache(){sessionStorage.removeItem(getMovieTheaterPageCacheKey())}
function getMovieTheaterPageCacheKey(){return"SS_MOVIE_THEATER_PAGE_CACHE"}function setNeedToReloadWhenBack(){sessionStorage.setItem("SS_MOVIE_THEATER_PAGE_NEED_TO_RELOAD",true)}function removeNeedToReloadFlag(){sessionStorage.removeItem("SS_MOVIE_THEATER_PAGE_NEED_TO_RELOAD")}function getNeedToReloadFlagKey(){return"SS_MOVIE_THEATER_PAGE_NEED_TO_RELOAD"}
function needToReloadMovieListPage(){var a=sessionStorage.getItem(getNeedToReloadFlagKey());CommonUtil.debug("need to reload flag = "+a);if(!a||a==""){CommonUtil.debug(" flag = false");return false}else{CommonUtil.debug(" flag = true");return true}};function onClickDatePrevious(){if(getDaysDiff(GLOBAL_todayDate,GLOBAL_searchDate)>0){GLOBAL_searchDate.setDate(GLOBAL_searchDate.getDate()-1);changeDatePickerStatus()}}function changeDatePickerStatus(){changeDateDisplay();datePickerOnDateChange()}function changeDateDisplay(){var a=getDaysDiff(GLOBAL_todayDate,GLOBAL_searchDate);changeDatePreviousStyle(true);changeDateNextStyle(true);a==0&&changeDatePreviousStyle(false);a==GLOBAL_dateMaxRange&&changeDateNextStyle(false);setSearchDateDisplay(a)}
function onClickDateNext(){if(getDaysDiff(GLOBAL_todayDate,GLOBAL_searchDate)<GLOBAL_dateMaxRange){GLOBAL_searchDate.setDate(GLOBAL_searchDate.getDate()+1);changeDatePickerStatus()}}function setSearchDateDisplay(a){a=a==0?I18NHelper["mSearch.today"]:GLOBAL_searchDate.format("ddd, mmm d");document.getElementById("searchDate").innerText=a}
function changeDatePreviousStyle(a){if(a){document.getElementById("datePrevious").href="javascript:onClickDatePrevious()";$("#datePreviousIcon").attr("class","clsDateIcon clsDatePreviousButtonUnfocused")}else{document.getElementById("datePrevious").href="javascript:void(0)";$("#datePreviousIcon").attr("class","clsDateIcon clsDatePreviousButtonDisabled")}}
function changeDateNextStyle(a){if(a){document.getElementById("dateNext").href="javascript:onClickDateNext()";$("#dateNextIcon").attr("class","clsDateIcon clsDateNextButtonUnfocused")}else{document.getElementById("dateNext").href="javascript:void(0)";$("#dateNextIcon").attr("class","clsDateIcon clsDateNextButtonDisabled")}}
function switchDatePreviousIcon(a){var b=true;if($("#datePrevious").attr("href")=="javascript:void(0)")b=false;if(b)a?$("#datePreviousIcon").attr("class","clsDateIcon clsDatePreviousButtonFocused"):$("#datePreviousIcon").attr("class","clsDateIcon clsDatePreviousButtonUnfocused")}
function switchDateNextIcon(a){var b=true;if($("#dateNext").attr("href")=="javascript:void(0)")b=false;if(b)a?$("#dateNextIcon").attr("class","clsDateIcon clsDateNextButtonFocused"):$("#dateNextIcon").attr("class","clsDateIcon clsDateNextButtonUnfocused")};
