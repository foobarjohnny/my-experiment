var GLOBAL_getting=0,ddaccordion={ajaxloadingmsg:"",internalError:"",headergroup:{},contentgroup:{},openedContentIndex:null,getOpenedContentIndex:function(){return this.openedContentIndex},resetOpenedContentIndex:function(){openedContentIndex=null},expandone:function(a,b){this.toggleone(a,b,"expand")},collapseone:function(a,b){this.toggleone(a,b,"collapse")},collapseall:function(a){var b=this.headergroup[a];this.contentgroup[a].filter(":visible").each(function(){b.eq(parseInt($(this).attr("contentindex"))).trigger("evt_accordion")})},
toggleone:function(a,b,d){var g=this.headergroup[a].eq(b);a=this.contentgroup[a].eq(b);if(typeof d=="undefined"||d=="expand"&&a.is(":hidden")||d=="collapse"&&a.is(":visible"))g.trigger("evt_accordion")},ajaxloadcontent:function(a,b,d,g){function f(c){if(c)if(c!=="Error"){e.cacheddata=c;e.status="cached";if(b.queue("fx").length==0){b.hide().html(c);e.status="complete";g()}c=parseInt(a.attr("headerindex"));loadImage(c)}else{b.hide().html('<div style="color:#666666;font-weight:bold;">'+GLOBAL_MSG_internalError+
"</div>");e.status="complete";g();window.setTimeout(function(){e.status="none"},100)}e.status!="complete"&&setTimeout(function(){f(e.cacheddata)},100)}var e=a.data("ajaxinfo");if(e.status=="none"){b.html(this.ajaxloadingmsg);b.slideDown(d.animatespeed);e.status="loading";$.ajax({url:e.url,error:function(){GLOBAL_getting=0;f("Error")},success:function(c){f(c==""?" ":c);GLOBAL_getting=0}})}else e.status=="loading"&&f(e.cacheddata)},expandit:function(a,b,d,g,f,e){var c=a.data("ajaxinfo");if(c)if(c.status==
"none"||c.status=="loading"){GLOBAL_getting=1;try{this.ajaxloadcontent(a,b,d,function(){ddaccordion.expandit(a,b,d,g,f)})}catch(i){alert(i)}}else{if(c.status=="cached"){b.html(c.cacheddata);c.cacheddata=null;c.status="complete"}}else{c=parseInt(a.attr("headerindex"));loadImage(c)}this.transformHeader(a,d,"expand");b.slideDown(e?0:d.animatespeed,function(){d.onopenclose(a.get(0),parseInt(a.attr("headerindex")),b.css("display"),g);if(d.postreveal=="gotourl"&&f){var h=a.is("a")?a.get(0):a.find("a:eq(0)").get(0);
h&&setTimeout(function(){location=h.href},200)}})},collapseit:function(a,b,d,g){this.transformHeader(a,d,"collapse");b.slideUp(d.animatespeed,function(){d.onopenclose(a.get(0),parseInt(a.attr("headerindex")),b.css("display"),g)})},transformHeader:function(a,b,d){a.addClass(d=="expand"?b.cssclass.expand:b.cssclass.collapse).removeClass(d=="expand"?b.cssclass.collapse:b.cssclass.expand);if(b.htmlsetting.location=="src"){a=a.is("img")?a:a.find("img").eq(0);a.attr("src",d=="expand"?b.htmlsetting.expand:
b.htmlsetting.collapse)}else if(b.htmlsetting.location=="prefix")a.find(".accordprefix").html(d=="expand"?b.htmlsetting.expand:b.htmlsetting.collapse);else if(b.htmlsetting.location=="suffix")a.find(".accordsuffix").html(d=="expand"?b.htmlsetting.expand:b.htmlsetting.collapse)},urlparamselect:function(a){a=window.location.search.match(RegExp(a+"=((\\d+)(,(\\d+))*)","i"));if(a!=null)a=RegExp.$1.split(",");return a},getCookie:function(a){a=RegExp(a+"=[^;]+","i");if(document.cookie.match(a))return document.cookie.match(a)[0].split("=")[1];
return null},setCookie:function(a,b){document.cookie=a+"="+b+"; path=/"},refreshAndInit:function(a){ddaccordion.urlparamselect(a.headerclass);var b=ddaccordion.getCookie(a.headerclass);ddaccordion.headergroup[a.headerclass]=$("."+a.headerclass);ddaccordion.contentgroup[a.headerclass]=$("."+a.contentclass);var d=ddaccordion.headergroup[a.headerclass];d.unbind();var g=ddaccordion.contentgroup[a.headerclass];a.cssclass={collapse:a.toggleclass[0],expand:a.toggleclass[1]};a.revealtype=a.revealtype||"click";
a.revealtype=a.revealtype.replace(/mouseover/i,"mouseenter");if(a.revealtype=="clickgo"){a.postreveal="gotourl";a.revealtype="click"}a.htmlsetting=typeof a.togglehtml=="undefined"?{location:"none"}:{location:a.togglehtml[0],collapse:a.togglehtml[1],expand:a.togglehtml[2]};a.oninit=typeof a.oninit=="undefined"?function(){}:a.oninit;a.onopenclose=typeof a.onopenclose=="undefined"?function(){}:a.onopenclose;var f={},e=ddaccordion.urlparamselect(a.headerclass)||(a.persiststate&&b!=null?b:a.defaultexpanded);
if(typeof e=="string")e=e.replace(/c/ig,"").split(",");if(e.length==1&&e[0]=="-1")e=[];if(a.collapseprev&&e.length>1)e=[e.pop()];if(a.onemustopen&&e.length==0)e=[0];d.each(function(c){var i=$(this);if(/(prefix)|(suffix)/i.test(a.htmlsetting.location)&&i.html()!=""){$('<span class="accordprefix"></span>').prependTo(this);$('<span class="accordsuffix"></span>').appendTo(this)}i.attr("headerindex",c+"h");g.eq(c).attr("contentindex",c+"c");var h=g.eq(c),j=h.find("a.hiddenajaxlink:eq(0)");j.length==1&&
i.data("ajaxinfo",{url:j.attr("href"),cacheddata:null,status:"none"});if(jQuery.inArray(typeof e[0]=="number"?c:c+"",e)!=-1){ddaccordion.expandit(i,h,a,false,false,!a.animatedefault);f={$header:i,$content:h}}else{h.hide();a.onopenclose(i.get(0),parseInt(i.attr("headerindex")),h.css("display"),false);ddaccordion.transformHeader(i,a,"collapse")}});d.bind("evt_accordion",function(c,i){if(!GLOBAL_getting){var h=g.eq(parseInt($(this).attr("headerindex")));if(h.css("display")=="none"){ddaccordion.expandit($(this),
h,a,true,i);a.collapseprev&&f.$header&&$(this).get(0)!=f.$header.get(0)&&ddaccordion.collapseit(f.$header,f.$content,a,true);f={$header:$(this),$content:h};ddaccordion.openedContentIndex=parseInt($(this).attr("headerindex"));console.log("Open Content : "+ddaccordion.openedContentIndex)}else if(!a.onemustopen||a.onemustopen&&f.$header&&$(this).get(0)!=f.$header.get(0)){ddaccordion.collapseit($(this),h,a,true);ddaccordion.openedContentIndex=null;console.log("close content and  this.openedContentIndex "+
ddaccordion.openedContentIndex)}}});d.bind(a.revealtype,function(){if(a.revealtype=="mouseenter"){clearTimeout(a.revealdelay);var c=parseInt($(this).attr("headerindex"));a.revealdelay=setTimeout(function(){ddaccordion.expandone(a.headerclass,c)},a.mouseoverdelay||0)}else{$(this).trigger("evt_accordion",[true]);return false}});d.bind("mouseleave",function(){clearTimeout(a.revealdelay)});a.oninit(d.get(),e);$(window).bind("unload",function(){d.unbind();var c=[];g.filter(":visible").each(function(){c.push($(this).attr("contentindex"))});
if(a.persiststate==true&&d.length>0){c=c.length==0?"-1c":c;ddaccordion.setCookie(a.headerclass,c)}})},init:function(){document.write('<style type="text/css">\n');document.write("a.hiddenajaxlink{display: none}\n");document.write("</style>")}};ddaccordion.ajaxloadingmsg='<div id="smallLoading" class="smallLoadingImage smallLoadingPopupBk"><div id="smallLoadingInside" class="clsSmallLoadingPopupInsideBk"></div></div><div style="color:#666666;font-weight:bold;">'+GLOBAL_MSG_loading+"</div>";
ddaccordion.internalError='<div style="color:#666666;font-weight:bold;">'+GLOBAL_MSG_internalError+"</div>";
