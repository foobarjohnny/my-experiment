function PoiCommon(){}
PoiCommon.prototype={saveFavToClient:function(){var a=getPoiDetailObj();this.hasValidPoiAddress(a)&&SDKAPI.invokePrivateService("SaveToFavoriteDirectly",a,this.saveFavToClientCallBack)},saveFavToClientCallBack:function(){$("#favIndicator").attr("class","favorites_add_button_unfocused");$("#favHref").attr("onClick","");saveFavFlag();var a=document.getElementById("bgDiv");a.style.display="block";window.setTimeout(function(){a.style.display="none"},1250)},onClickDrive:function(a){function b(){a.disabled=false}
function c(){CommonUtil.debug("Failed to start navigation!");a.disabled=false}a.disabled=true;var d=getPoiDetailObj();if(this.hasValidPoiAddress(d)){recordMisLog_DriveTo();navigator.tnservice.navTo("",d,"",b,c)}},showMapOfClient:function(){function a(){}function b(){CommonUtil.debug(I18NHelper["Failed in mapping this place!"])}var c=getPoiDetailObj();if(this.hasValidPoiAddress(c)){recordMisLog_ViewMap();navigator.tnservice.displayMap(c,"",a,b)}},formatPhoneToDisplay:function(a){a=CommonUtil.getValidString(a);
a=$.trim(a);if(""==a)return a;var b=a.length;if(b==11)a=a.substring(1);if(b==10){b=a.substring(0,3);var c=a.substring(3,6);a=a.substring(6);a="("+b+") "+c+"-"+a}return a},onClickPhoneNo:function(){var a=this.getPhoneNo();if(a){recordMisLog_CallTo();location.href="tel:"+a}},hasValidPoiAddress:function(a){return a&&this.isPoiAddressValid(a.stop)},isPoiAddressValid:function(a){return a.lat&&a.lon},changePoiDetailCss:function(){resizeMenuImage()},setPoiAddressDisplay:function(a){var b="";if(this.isPoiAddressValid(a)){if(a.firstLine)b+=
'<div style="width:100%;" class="clsAddressFS clsAddressLineSpan">'+a.firstLine.toUpperCase()+"</div>";b+="<div class='clsCityFS'>";if(a.city)b+=a.city.toUpperCase();if(a.province)b+=", "+a.province.toUpperCase();b+=" "+a.zip+"</div>";$("#mainButtonsBar").css("display","block")}else{if(CommonUtil.isIphone()){b=I18NHelper["common.address.Unavailable"];$("#navImg").hide()}else b=I18NHelper["common.Unavailable"];this.disableButton("navButton")}$("#address").html(b)},disableButton:function(a){$("#"+a).attr("onClick",
"");$("#"+a).attr("ontouchstart","");$("#"+a).attr("ontouchend","");$("#"+a).attr("ontouchmove","");$("#"+a).css("opacity","0.6")},setPhoneNo:function(){CommonUtil.isScoutStyle()&&$("#phoneDivLandscape").html('<div class="td" style="width:20%;"></div><div class="td clsPhonePicContainerLandscape" style="width:60%;vertical-align:middle;" align="center">\t<img id="phonePicCallForScout" class="call_icon_unfocused" /></div><div class="td" style="width:20%;" align="right">\t<img id="phonePicLandscape" class="poi_details_call_icon_unfocused"/></div>');
var a=this.getPhoneNo();if(a){a=PoiCommonHelper.formatPhoneToDisplay(a);$("#phone").html(a);CommonUtil.isIpad()&&ProgramConstants.ATTNAVPROG==ClientInfo.programCode&&$("#phoneDivLandscape").html("<span class='td align_center fs_small fw_bold'>"+a+"</span>")}else{if(CommonUtil.isScoutStyle()){$("#phone").html(I18NHelper["common.phone.Unavailable"]);$("#phonePic").hide();$("#phonePicLandscape").hide()}else $("#phone").html(I18NHelper["common.Unavailable"]);this.disableButton("phoneButton");this.disableButton("phoneButtonLandscape")}},
getPhoneNo:function(){var a=getPoiDetailObj();return a?CommonUtil.getValidString(a.poi.bizPoi.phoneNumber):""},changePhoneNoLayout:function(){if(CommonUtil.isLandscape()){$("#thirdLineDivLandscape").show();$("#thirdLineDiv").hide()}else{$("#thirdLineDiv").show();$("#thirdLineDivLandscape").hide()}},highLightPhone:function(a){var b="#phonePic";if(a.id=="phoneButtonLandscape")b="#phonePicLandscape";var c=$(b).attr("class").replace("poi_details_call_icon_unfocused","poi_details_call_icon_focused");$(b).attr("class",
c);highlightBtnAll(a,"clsPhoneNoColor","clsPhoneNoColorHL");disHighlightBtnAll(a,"clsPhoneBtnBgNormal","clsPhoneBtnBgHL");CommonUtil.isScoutStyle()&&$("#phonePicCallForScout").attr("class","call_icon_focused")},dishighLightPhone:function(a){var b="#phonePic";if(a.id=="phoneButtonLandscape")b="#phonePicLandscape";var c=$(b).attr("class").replace("poi_details_call_icon_focused","poi_details_call_icon_unfocused");$(b).attr("class",c);disHighlightBtnAll(a,"clsPhoneNoColorHL","clsPhoneNoColor");disHighlightBtnAll(a,
"clsPhoneBtnBgHL","clsPhoneBtnBgNormal");CommonUtil.isScoutStyle()&&$("#phonePicCallForScout").attr("class","call_icon_unfocused")},highLightNavButton:function(a){var b=$("#navImg").attr("class").replace("poi_details_driveto_icon_unfocused","poi_details_driveto_icon_focused");$("#navImg").attr("class",b);switchHightlight(a,"clsNavButtonBgNormal","clsNavButtonBgHL");switchHightlight(a,"clsNavFontColor","clsNavFontColorHL")},dishighLightNavButton:function(a){var b=$("#navImg").attr("class").replace("poi_details_driveto_icon_focused",
"poi_details_driveto_icon_unfocused");$("#navImg").attr("class",b);switchHightlight(a,"clsNavButtonBgHL","clsNavButtonBgNormal");switchHightlight(a,"clsNavFontColorHL","clsNavFontColor")},generateTabs:function(a){hasTabNum=a.length;for(var b=0,c=0,d="",e=0;e<a.length;e++){b=this.getTabWidth(a[e][1],hasTabNum);d+=e==0?this.createTab(b,a[e][0],a[e][1],"On",c,hasTabNum):this.createTab(b,a[e][0],a[e][1],"Off",c,hasTabNum);c++}d+="<div class='td'>&nbsp;</div>";$("#tabShow").html(d)},addTab:function(a,
b,c,d){var e=a.length;if(b&&e<4)a[e]=[c,d]},createTab:function(a,b,c,d,e,g){var f="";f+='<div class="td clsTabOutSideTable '+a+'">';f+='<div style="width:100%;" class="table clsTabInSideTable clsFixTable">';f+="<div class=\"tr\" onClick=\"PoiCommonHelper.onChangeTab('poidetailtab','"+e+"','"+g+"','"+c+"')\">";f+='<div id="poidetaillefttab'+e+'" height="100%" align="center" class="'+("td clsButtonLeft"+d)+'"> </div>';f+='<div id="poidetailmiddletab'+e+'" height="100%" align="center" class="'+("td clsButtonMiddle"+
d)+'"><span class="fs_middle4Tab fs_middle">'+b+"</span></div>";f+='<div id="poidetailrighttab'+e+'" height="100%" align="center" class="'+("td clsButtonRignt"+d)+'"></div>';f+="</div>";f+="</div>";f+="</div>";return f},getTabWidth:function(a,b){var c="clsPoiTabNormalSmall";if(b<=4)c="clsPoiTabNormal";if("poireview"==a)c="clsPoiTabReview";else if("poigas"==a)c="clsPoiTabGas";else if("poitheater"==a)c="clsPoiTabTheater";if("poiextra"==a&&b>=4)c="clsPoiTabNormalSmall";return c},onChangeTab:function(a,
b,c,d){PopupUtil.hide();for(a=0;a<c;a++)if(a==b){document.getElementById("poidetaillefttab"+b).className="td clsTabEdge clsTabLeftOnBk";document.getElementById("poidetailmiddletab"+b).className="td clsButtonMiddleOn clsTabMiddleOnBk text_cutoff";document.getElementById("poidetailrighttab"+b).className="td clsTabEdge clsTabRightOnBk"}else if(document.getElementById("poidetaillefttab"+a)){document.getElementById("poidetaillefttab"+a).className="td clsTabEdge clsTabLeftOffBk";document.getElementById("poidetailmiddletab"+
a).className="td clsButtonMiddleOff clsTabMiddleOffBk text_cutoff";document.getElementById("poidetailrighttab"+a).className="td clsTabEdge clsTabRightOffBk"}hideAll();$("#"+d).show();eval("show"+d)()},showpoideals:function(){var a="",b=CommonUtil.getValidString(PoiCacheHelper.getPoiDealCache());if(""!=b){b=JSON.parse(b);if(b.success){b=JSON.parse(b.deals);for(var c=b.length,d=0;d<c;d++)a+=this.getDealDiv(b[d].name,b[d].description,b[d].dealImage);if(c==0)a+=this.getDealDiv("",I18NHelper["poidetail.dataUnavailable"]);
else recordMisLog_ViewCoupon()}}$("#poideals").html(a)},displayPoiMenu:function(){var a="";a=CommonUtil.getValidString(PoiCacheHelper.getPoiMenuCache());if(""!=a){recordMisLog_ViewMenu();a=JSON.parse(a);var b=a.menu;if(""!=b)$("#poimenu").html(b);else{$("#menuImageDiv").width();$("#clsPadding");$("#menuImageDiv").width();$("#clsPadding");$("#poimenu").html("");""!=a.menuImage?$("#poimenu").html('<image id="{0}" src="{1}" />'.format("menuImage","data:image/png;base64,"+a.menuImage)):$("#poimenu").html(I18NHelper["poidetail.menuUnavailable"])}}},
getDealDiv:function(a,b,c){a="<div class='clsDealItemDiv'><div class='clsDealTitleDiv fs_large fw_bold fc_black'>"+a+"</div><div class='clsDealInfoDiv fs_small fc_gray'>"+b+"</div>";if(c)a+="<div class='clsDealInfoDiv'><img id='dealImage' src='"+c+"'/></div>";a+="</div>";return a},getAdSourceImageClass:function(a){var b="";if(""!=a){if(a=="TN"&&$("#programCode").val()=="SCOUTPROG")a="Scout";b=a+"_logo"}return b},formatPoiDesc:function(a){return a=a.replace(/[&]{1}/g,"&amp;")},getAdsId:function(a){var b=
"";if(a.poi){b=CommonUtil.getValidString(a.poi.adsId);a=a.poi.ad;if((""==b||"0"==b)&&a)b=CommonUtil.getValidString(a.adID)}return b},fetchPoiMainFromServer:function(){loadPopup_poidetail();var a=PoiDetailSpecificHelper.getSearchCriteriaForAds();a={loadingStyle:2,url:GLOBAL_hostUrl+"getPoiDetailData.do?operateType=mainnew&jsonStr="+JSON.stringify(a)+"&"+CommonUtil.getClientInfo(),onSuccess:this.ajaxCallBackPoiMainFromServer};CommonUtil.ajax(a)},ajaxCallBackPoiMainFromServer:function(a){PoiDetailSpecificHelper.handlePoiMainFromServer(a)}};
var PoiCommonHelper=new PoiCommon;var PoiCacheKeys={POIDETAIL:"SESSION_STORAGE_POIDETAILDATA",SIMPLEPOI:"SESSION_STORAGE_SIMPLE_POIDETAILDATA",REVIEWDATA:"SESSION_STORAGE_POIREVIEWDATA",REVIEWOPTIONS:"SESSION_STORAGE_POIREVIEWOPTIONS"};function PoiCache(){}
PoiCache.prototype={setLogoImageCache:function(a,b){localStorage.setItem(this.getLogoImageCacheKey(a),b)},getLogoImageCache:function(a){return localStorage.getItem(this.getLogoImageCacheKey(a))},getLogoImageCacheKey:function(a){return"LOCAL_STORAGE_LOGOIMAGE_"+a},setPoiMainCache:function(a){sessionStorage.setItem(this.getPoiMainCacheKey(),a)},getPoiMainCache:function(){return sessionStorage.getItem(this.getPoiMainCacheKey())},removePoiMainCache:function(){return sessionStorage.removeItem(this.getPoiMainCacheKey())},
getPoiMainCacheKey:function(){return"SESSION_STORAGE_POIDATA_MAIN_"+$("#poikey").val()},setPoiMenuCache:function(a){sessionStorage.setItem(this.getPoiMenuCacheKey(),a)},getPoiMenuCache:function(){return sessionStorage.getItem(this.getPoiMenuCacheKey())},removePoiMenuCache:function(){return sessionStorage.removeItem(this.getPoiMenuCacheKey())},getPoiMenuCacheKey:function(){return"SESSION_STORAGE_POIDATA_MENU_"+$("#poikey").val()},setGasByPriceCache:function(a){sessionStorage.setItem(this.getGasByPriceCacheKey(),
a)},getGasByPriceCache:function(){return sessionStorage.getItem(this.getGasByPriceCacheKey())},removeGasByPriceCache:function(){return sessionStorage.removeItem(this.getGasByPriceCacheKey())},getGasByPriceCacheKey:function(){return"SESSION_STORAGE_POIDATA_GASBYPRICE_"+$("#poikey").val()},setPoiDealCache:function(a){sessionStorage.setItem(this.getPoiDealCacheKey(),a)},getPoiDealCache:function(){return sessionStorage.getItem(this.getPoiDealCacheKey())},removePoiDealCache:function(){return sessionStorage.removeItem(this.getPoiDealCacheKey())},
getPoiDealCacheKey:function(){return"SESSION_STORAGE_POIDATA_DEAL_"+$("#poikey").val()},setPoiExtraCache:function(a){sessionStorage.setItem(this.getPoiExtraCacheKey(),a)},getPoiExtraCache:function(){return sessionStorage.getItem(this.getPoiExtraCacheKey())},removePoiExtraCache:function(){return sessionStorage.removeItem(this.getPoiExtraCacheKey())},getPoiExtraCacheKey:function(){return"SESSION_STORAGE_POIDATA_EXTRA_"+$("#poikey").val()},setCurrentReviewer:function(a){sessionStorage.setItem(this.getCurrentReviewerCacheKey(),
a)},removeCurrentReviewerCache:function(){return sessionStorage.removeItem(this.getCurrentReviewerCacheKey())},getCurrentReviewer:function(){return sessionStorage.getItem(this.getCurrentReviewerCacheKey())},getCurrentReviewerCacheKey:function(){return"SESSION_STORAGE_REVIEWE_CURRENTREVIEWER"},setNickName:function(a){sessionStorage.setItem(this.getNickNameCacheKey(),a)},getNickName:function(){return sessionStorage.getItem(this.getNickNameCacheKey())},getNickNameCacheKey:function(){return"SESSIONSTORAGE_STORAGE_NICKNAME"},
getDummyPoiDetail:function(){var a="",b=document.getElementById("dummyTemplate").value;b={data:0,url:GLOBAL_hostUrl+"dummyDataAction.do?poi="+b,isAsynchronous:false};b.onSuccess=function(c){a=c};CommonUtil.ajax(b);return a},getReviewStatusCacheKey:function(){return"SESSIONSTORAGE_STORAGE_REVIEWSTATUS_"+$("#poikey").val()},getReviewStatus:function(){return sessionStorage.getItem(this.getReviewStatusCacheKey())},setReviewStatusAsView:function(){this.setReviewStatus("VIEW")},setReviewStatus:function(a){sessionStorage.setItem(this.getReviewStatusCacheKey(),
a)},setPoiReviewCacheKeyForAddReview:function(){sessionStorage.setItem("SESSIONSTORAGE_STORAGE_POI_REVIEW_CACHEKEY_FOR_ADDREVIEW",appendPoiKey(PoiCacheKeys.REVIEWDATA))},getPoiReviewCacheKeyForAddReview:function(){return sessionStorage.getItem("SESSIONSTORAGE_STORAGE_POI_REVIEW_CACHEKEY_FOR_ADDREVIEW")},setPoiReviewOptionCache:function(a){sessionStorage.setItem(PoiCacheKeys.REVIEWOPTIONS,a)},getPoiReviewOptionCache:function(){return sessionStorage.getItem(PoiCacheKeys.REVIEWOPTIONS)},removePoiReviewCacheKeyForAddReview:function(){sessionStorage.removeItem("SESSIONSTORAGE_STORAGE_POI_REVIEW_CACHEKEY_FOR_ADDREVIEW")},
setPoiReviewCacheForAddReview:function(a){sessionStorage.setItem(this.getPoiReviewCacheKeyForAddReview(),a)},setMapFlag:function(a){sessionStorage.setItem(this.getMapFlagCacheKey(),a)},removeMapFlagCache:function(){return sessionStorage.removeItem(this.getMapFlagCacheKey())},getMapFlag:function(){return sessionStorage.getItem(this.getMapFlagCacheKey())},getMapFlagCacheKey:function(){return"SESSIONSTORAGE_STORAGE_MAPFLAG_"+$("#poikey").val()},setBizHourFlag:function(a){sessionStorage.setItem(this.getBizHourFlagCacheKey(),
a)},removeBizHourFlagCache:function(){return sessionStorage.removeItem(this.getBizHourFlagCacheKey())},getBizHourFlag:function(){return sessionStorage.getItem(this.getBizHourFlagCacheKey())},getBizHourFlagCacheKey:function(){return"SESSIONSTORAGE_STORAGE_BIZHOURFLAG_"+$("#poikey").val()}};var PoiCacheHelper=new PoiCache;function PoiFetchData(){}
PoiFetchData.prototype={fetchLogoImage:function(a){var b=CommonUtil.getValidString(PoiCacheHelper.getLogoImageCache(a.logoName));if(b!="")displayLogoImage(b);else{a={url:GLOBAL_hostUrl+"getLogImage.do?jsonStr="+JSON.stringify(a)+"&"+CommonUtil.getClientInfo(),onSuccess:this.ajaxCallFetchLogoImage};CommonUtil.ajax(a)}},ajaxCallFetchLogoImage:function(a){var b=a.image;if(b!=""&&b!=null){displayLogoImage(b);PoiCacheHelper.setLogoImageCache(a.imageName,b)}},fetchPoiExtra:function(){loadPopup_poidetail();var a=
{loadingStyle:2,url:GLOBAL_hostUrl+"getPoiDetailData.do?operateType=extra&jsonStr="+JSON.stringify(getPoiSearchKey())+"&"+CommonUtil.getClientInfo(),onSuccess:this.ajaxCallBackPoiExtra};CommonUtil.ajax(a)},ajaxCallBackPoiExtra:function(a){if(a.success){PoiCacheHelper.setPoiExtraCache(JSON.stringify(a));displayPoiExtra()}else noRecordFoundForExtra()},fetchMenuData:function(){var a=getPoiSearchKey();a.menuWidth=$("#menuImageDiv").width();a.menuHeight=$("#menuImageDiv").width();loadPopup_poidetail();
a={url:GLOBAL_hostUrl+"getPoiDetailData.do?operateType=menu&jsonStr="+JSON.stringify(a)+"&"+CommonUtil.getClientInfo(),onSuccess:this.ajaxCallBackPoiMenu,loadingStyle:2};CommonUtil.ajax(a)},ajaxCallBackPoiMenu:function(a){if(a.success){PoiCacheHelper.setPoiMenuCache(JSON.stringify(a));PoiCommonHelper.displayPoiMenu()}},fetchReviewData:function(){var a=getPoiDetailObj();a={poiId:a.poi.bizPoi.poiId,categoryId:a.poi.bizPoi.categoryId};loadPopup_poidetail();a={loadingStyle:2,url:GLOBAL_hostUrl+"poireview.do?operateType=view&jsonStr="+
JSON.stringify(a)+"&"+CommonUtil.getClientInfo(),onSuccess:this.ajaxCallBackReview};CommonUtil.ajax(a)},ajaxCallBackReview:function(a){CommonUtil.saveInCache(appendPoiKey(PoiCacheKeys.REVIEWDATA),JSON.stringify(a));displayReview()}};var PoiFetchDataHelper=new PoiFetchData;function PoiDetailSpecific(){}
PoiDetailSpecific.prototype={setMapSize:function(){},getSearchCriteria:function(a){var b=getMapSize();return{imageName:"",width:b.width,height:b.height,center:a,markers:"color:blue|"+a}},getStaticMapUrl:function(a){var b=getPoiDetailObj().poi.bizPoi.poiId,c=GLOBAL_mapapiUrl;c+="?width="+a.width+"&height="+a.height+"&zoom=1&center=";c+=a.center+"&markers="+encodeURIComponent(a.markers)+"&apiKey="+encodeURIComponent(GLOBAL_mapapiKey)+"&poiID="+b;return c},fetchLogoWhenShowMain:function(){},getTopPartLogoImage:function(a){var b=
CommonUtil.getValidString(a.poiLogo);if(""==b)b=CommonUtil.getValidString(a.brandLogo);if(""==b)b=CommonUtil.getValidString(a.categoryLogo);displayEmptyLogo();fetchLogo(b)},initTab:function(a){var b=this.getPoiTemplateName(a.poi.bizPoi.categoryId),c=this.hasReviewCheck(a),d=this.hasDeals(a),e=this.hasPoiMenu(a),g=this.hasPoiExtraAttributes(a),f=false,h=false;c||hideTopReviewNo();CommonUtil.debug("Movie Feature: "+FeatureHelper.MOVIE);if(b=="poitheater"&&CommonUtil.getBoolean(FeatureHelper.MOVIE))f=
true;if(a.poi.supplimentInfos&&CommonUtil.getBoolean(FeatureHelper.GAS))h=true;a=[];PoiCommonHelper.addTab(a,true,I18NHelper["poidetail.tab.main"],"poimain");PoiCommonHelper.addTab(a,c,I18NHelper["poidetail.tab.reviews"],"poireview");PoiCommonHelper.addTab(a,d,I18NHelper["poidetail.tab.deals"],"poideals");PoiCommonHelper.addTab(a,e,I18NHelper["poidetail.tab.menu"],"poimenu");PoiCommonHelper.addTab(a,f,I18NHelper["poidetail.tab.showtime"],"poitheater");PoiCommonHelper.addTab(a,h,I18NHelper["poidetail.tab.gasprices"],
"poigas");PoiCommonHelper.addTab(a,g,I18NHelper["poidetail.tab.extra"],"poiextra");PoiCommonHelper.generateTabs(a);c=isBackFromViewOrAddReview();initPoiCacheByReviewStatus(c);f?loadResourceAndSetShownTab(b,c):setShownTab(c)},loadPoiMain:function(a){if(this.hasAdsId(a))PoiCommonHelper.fetchPoiMainFromServer();else if(this.shouldCallAdsServer(a))this.fetchOrganicAds();else CommonUtil.getBoolean(a.poi.hasPoiDetails)?this.fetchPoiMain():displayMapImage()},getSearchCriteriaForAds:function(){var a=getPoiDetailObj(),
b=PoiCommonHelper.getAdsId(a);return{poiId:0,categoryId:a.poi.bizPoi.categoryId,adsId:b,width:0,height:0}},fetchPoiMain:function(){var a=getPoiSearchKey();a.width=$("#logImageDiv").width();a.height=$("#logImageDiv").width();loadPopup_poidetail();a={data:0,loadingStyle:2,url:GLOBAL_hostUrl+"getPoiDetailData.do?operateType=main&jsonStr="+JSON.stringify(a)+"&"+CommonUtil.getClientInfo(),onSuccess:this.ajaxCallBackPoiMain};CommonUtil.ajax(a)},ajaxCallBackPoiMain:function(a){if(a=CommonUtil.getValidString(a))if(JSON.parse(a).success){PoiCacheHelper.setPoiMainCache(a);
displayPoiMain()}else displayMapImage();else displayMapImage()},getPoiTemplateName:function(a){if(this.isElementExistInList([595],a))return"poihotel";if(this.isElementExistInList([181],a))return"poitheater";if(this.isElementExistInList([2041,230,227,249,250,646,229,231,232,236,240,241,243,251,664,253,254,256,257,261],a))return"poiOpenTable";return""},isElementExistInList:function(a,b){for(var c=0;c<a.length;c++)if(b==a[c])return true;return false},filterAdSource:function(a){var b="";if("CS"==a||"TN"==
a||"ATTi"==a||"Groupon"==a)b=a;return b},handlePoiMainFromServer:function(a){PoiCacheHelper.setPoiMainCache(a.mainTab);PoiCacheHelper.setPoiMenuCache(a.menuTab);PoiCacheHelper.setPoiDealCache(a.dealTab);showpoimain()},fetchGasByPriceData:function(){var a=getPoiDetailObj().poi.supplimentInfos,b={success:false};if(a){b.success=true;for(var c=a.length,d=Array(c),e=0;e<c;e++)d[e]={name:a[e].supportInfo,price:a[e].price}}b.data=JSON.stringify(d);PoiCacheHelper.setGasByPriceCache(JSON.stringify(b));displayGasByPrice()},
fetchOrganicAds:function(){loadPopup_poidetail();var a={data:0,url:GLOBAL_hostUrl+"getPoiDetailData.do?operateType=adsPoi&jsonStr="+JSON.stringify(getPoiSearchKey())+"&"+CommonUtil.getClientInfo(),onSuccess:this.ajaxCallBackOrganicAds};CommonUtil.ajax(a)},ajaxCallBackOrganicAds:function(a){if(a=CommonUtil.getValidString(a)){a=JSON.parse(a);if(a.success){PoiCacheHelper.setPoiMainCache(a.mainTab);PoiCacheHelper.setPoiMenuCache(a.menuTab);PoiCacheHelper.setPoiDealCache(a.dealTab);displayPoiMain()}else displayMapImage()}else displayMapImage()},
shouldCallAdsServer:function(a){var b=CommonUtil.getBoolean(a.poi.isAdsPoi);a=a.poi.bizPoi.poiId;var c=false;if(b&&"0"!=a)c=true;return c},hasAdsId:function(a){var b=false;a=PoiCommonHelper.getAdsId(a);if(""!=a&&"0"!=a)b=true;return b},hasReviewCheck:function(a){var b=true,c=a.poi.isRatingEnable;if("0"==a.poi.bizPoi.poiId||!c)b=false;return b},hasDeals:function(a){return CommonUtil.getBoolean(a.poi.hasDeals)},hasHotelTab:function(a){return CommonUtil.getBoolean(a.poi.hasHotelAlliance)},hasOpenTableTab:function(a){if(a.poi.openTable)return CommonUtil.getBoolean(a.poi.openTable.isReservable);
return false},hasPoiMenu:function(a){var b=CommonUtil.getBoolean(a.poi.hasPoiMenu);a=CommonUtil.getBoolean(a.poi.hasAdsMenu);var c=false;if(b||a)c=true;return c},hasPoiExtraAttributes:function(a){return CommonUtil.getBoolean(a.poi.hasPoiExtraAttributes)},hasReviewTab:function(){var a=getPoiDetailObj(),b=true,c=a.poi.isRatingEnable;if("0"==a.poi.bizPoi.poiId||!c)b=false;return b}};var PoiDetailSpecificHelper=new PoiDetailSpecific;
