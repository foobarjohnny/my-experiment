var getDistanceEventHandler,Global_newVersion=false;function onClickMore(){event.stopPropagation();var a=GLOBAL_serverUrl+"/html/adsinfo.do?operateType=detail&"+CommonUtil.getClientInfo()+"&isDummy="+$("#isDummy").val();recordVbbMisLog_Detail_View_MoreInfo_Click();goToAdsDetail(a)}function goToAdsDetail(a){try{navigator.tnprivateservice.doPrivateService("DisplayBillboardDetail",{url:a},function(){},function(){alert(I18NHelper["ads.displayDetailErr"])})}catch(b){location.href=a}}
function initPhoneGap(){document.addEventListener("deviceready",onDeviceReady,false)}function onDeviceReady(){initData()}function onClickDrive(){function a(){}function b(){alert(I18NHelper["common.navigationErr"])}event.stopPropagation();var c=getAdsAddress();console.log("address:"+JSON.stringify(c));if(isAddressValid()){recordVbbMisLog_Detail_View_End(MisLogConstants.EXIT_REASON_DRIVE_TO,getDuration());recordVbbMisLog_Detail_View_DriveTo();navigator.tnservice.navTo("",c,"",a,b)}}
function getDuration(){return(new Date).getTime()-GLOBAL_enterTime}function getAdsAddress(){return{id:"0",selectedIndex:0,stop:{lat:$("#lat").val(),lon:$("#lon").val(),firstLine:$("#firstLine").val(),label:$("#label").val(),city:$("#city").val(),province:$("#state").val(),zip:$("#zip").val()}}}function isAddressValid(){return true}
function onClickBackGround(){if("open"==PoiCacheHelper.getOpenCloseFlag()){PoiCacheHelper.setOpenCloseFlag("close");Global_newVersion?$("#topRightImage").attr("class","openPoi713"):$("#openCloseImage").attr("class","openPoi");changeDisplayMode(0)}else{recordVbbMisLog_Initial_View_Click();PoiCacheHelper.setOpenCloseFlag("open");Global_newVersion?$("#topRightImage").attr("class","closePoi713"):$("#openCloseImage").attr("class","closePoi");changeDisplayMode(1)}}function initData(){getAdsDistance()}
function clearInterval(){window.clearInterval(getDistanceEventHandler)}function changeDisplayMode(a){SDKAPI.invokePrivateService("ChangeBillboardMode",{mode:a})}function setAdsDistance(a){a=""+JSON.parse(a).distance;$("#distance").html(a);PoiCacheHelper.setDistanceTextCacheForAds(a)}function getAdsDistance(){var a=$("#lat").val(),b=$("#lon").val();!a||a==0||!b||b==0||SDKAPI.invokePrivateService("GetBillboardDistance",{lat:a,lon:b},setAdsDistance)}
function displayEmptyLogo(){$("#logImage").attr("src",GLOBAL_imageCommonUrl+"poi_details_default_logo_unfocused.png")}function highLightNavBtn(a){var b=$("#navImg").attr("class").replace("poi_details_driveto_icon_unfocused","poi_details_driveto_icon_focused");$("#navImg").attr("class",b);switchHightlight(a,"clsNavButtonBgNormal","clsNavButtonBgHL");switchHightlight(a,"clsNavFontColor","clsNavFontColorHL")}
function dishighLightNavBtn(a){var b=$("#navImg").attr("class").replace("poi_details_driveto_icon_focused","poi_details_driveto_icon_unfocused");$("#navImg").attr("class",b);switchHightlight(a,"clsNavButtonBgHL","clsNavButtonBgNormal");switchHightlight(a,"clsNavFontColorHL","clsNavFontColor")}
function highLightPhone(a){var b="#phonePic";if(a.id=="phoneButtonLandscape")b="#phonePicLandscape";var c=$(b).attr("class").replace("poi_details_call_icon_unfocused","poi_details_call_icon_focused");$(b).attr("class",c);highlightBtnAll(a,"clsPhoneNoColor","clsPhoneNoColorHL");disHighlightBtnAll(a,"clsPhoneBtnBgNormal","clsPhoneBtnBgHL");CommonUtil.isScoutStyle()&&$("#phonePicCallForScout").attr("class","call_icon_focused")}
function dishighLightPhone(a){var b="#phonePic";if(a.id=="phoneButtonLandscape")b="#phonePicLandscape";var c=$(b).attr("class").replace("poi_details_call_icon_focused","poi_details_call_icon_unfocused");$(b).attr("class",c);disHighlightBtnAll(a,"clsPhoneNoColorHL","clsPhoneNoColor");disHighlightBtnAll(a,"clsPhoneBtnBgHL","clsPhoneBtnBgNormal");CommonUtil.isScoutStyle()&&$("#phonePicCallForScout").attr("class","call_icon_unfocused")}
function initLayout(){var a=0,b=$("version").val().split(".");if(b){a=b[1]||0;var c=b[2]||0;a=parseInt(b[0]||0)*100+parseInt(a)*10+parseInt(c)}if(a>=713){$("oldImgDiv").hide();$("topRightDiv").show();$("topTitleDiv").height(topTitleDivHeight);$("container_div").height(containerDivHeight);Global_newVersion=true}};var MisLogConstants={EVENT_ID_VBB_INITIAL_VIEW_CLICK:783,EVENT_ID_VBB_INITIAL_VIEW_END:785,EVENT_ID_VBB_DETAIL_VIEW_DRIVETO:788,EVENT_ID_VBB_DETAIL_VIEW_MOREINFO_CLICK:789,EVENT_ID_VBB_POI_VIEW_END:791,EVENT_ID_VBB_POI_VIEW_DRIVETO:792,EVENT_ID_VBB_POI_VIEW_CALLTO:793,EVENT_ID_VBB_POI_VIEW_DEAL:794,EVENT_ID_VBB_POI_VIEW_MENU:795,EVENT_ID_VBB_POI_VIEW_MAP:796,EXIT_REASON_DRIVE_TO:5,EXIT_REASON_MAP:6};
function recordVbbMisLog_Initial_View_Click(){recordMisLogOfVbb(MisLogConstants.EVENT_ID_VBB_INITIAL_VIEW_CLICK)}function recordVbbMisLog_Detail_View_DriveTo(){recordMisLogOfVbb(MisLogConstants.EVENT_ID_VBB_DETAIL_VIEW_DRIVETO)}function recordVbbMisLog_Detail_View_End(a,b){recordMisLogOfVbb2(MisLogConstants.EVENT_ID_VBB_INITIAL_VIEW_END,a,b)}function recordVbbMisLog_Detail_View_MoreInfo_Click(){recordMisLogOfVbb(MisLogConstants.EVENT_ID_VBB_DETAIL_VIEW_MOREINFO_CLICK)}
function recordMisLog_DriveTo_internal(){recordMisLogOfVbb(MisLogConstants.EVENT_ID_VBB_POI_VIEW_DRIVETO)}function recordMisLog_Poi_View_End(a,b){recordMisLogOfVbb2(MisLogConstants.EVENT_ID_VBB_POI_VIEW_END,a,b)}function recordMisLog_ViewCoupon(){recordMisLogOfVbb(MisLogConstants.EVENT_ID_VBB_POI_VIEW_DEAL)}function recordMisLog_CallTo(){recordMisLogOfVbb(MisLogConstants.EVENT_ID_VBB_POI_VIEW_CALLTO)}function recordMisLog_ViewMenu(){recordMisLogOfVbb(MisLogConstants.EVENT_ID_VBB_POI_VIEW_MENU)}
function recordMisLog_ViewMap_internal(){recordMisLogOfVbb(MisLogConstants.EVENT_ID_VBB_POI_VIEW_MAP)}function getCommonVBBFields(){return{"70002":$("#adId").val(),"70003":$("#hidAdSource").val(),"70001":$("#poiId").val(),"70012":$("#poiType").val()}}function recordMisLogOfVbb(a){SDKAPI.logEvent(a,getCommonVBBFields())}function recordMisLogOfVbb2(a,b,c){var d=getCommonVBBFields();d["70037"]=b;d["70038"]=c;SDKAPI.logEvent(a,d)};function PoiCache(){}
PoiCache.prototype={getAdsDetailCache:function(){return sessionStorage.getItem(this.getAdsDetailCacheKey())},getAdsDetailCacheKey:function(){return"SESSION_STORAGE_ADSDETAILDATA_"+$("#adId").val()},setAdsDetailCache:function(a){sessionStorage.setItem(this.getAdsDetailCacheKey(),a)},removeAdsDetailCache:function(){return sessionStorage.removeItem(this.getAdsDetailCacheKey())},setAdsIdCache:function(a){localStorage.setItem(this.getAdsIdCacheKey(),a)},getAdsIdCacheKey:function(){return"LOCAL_STORAGE_ADS_ID"},getAdsIdCache:function(){return localStorage.getItem(this.getAdsIdCacheKey())},
cleanAdsIdCache:function(){return localStorage.removeItem(this.getAdsIdCacheKey())},setDistanceTextCacheForAds:function(a){localStorage.setItem(this.getDistanceTextCacheKeyForAds(),a)},getDistanceTextCacheForAds:function(){return localStorage.getItem(this.getDistanceTextCacheKeyForAds())},getDistanceTextCacheKeyForAds:function(){return"LOCAL_STORAGE_DISTANCE_TEXT_ADS"},removeDistanceTextCacheForAds:function(){localStorage.removeItem(this.getDistanceTextCacheKeyForAds())},setOpenCloseFlag:function(a){sessionStorage.setItem(this.getOpenCloseFlagCacheKey(),
a)},getOpenCloseFlag:function(){return sessionStorage.getItem(this.getOpenCloseFlagCacheKey())},getOpenCloseFlagCacheKey:function(){return"SESSIONSTORAGE_STORAGE_ADS_OPENCLOSE"},setPoiMainCache:function(a){sessionStorage.setItem(this.getPoiMainCacheKey(),a)},getPoiMainCache:function(){return sessionStorage.getItem(this.getPoiMainCacheKey())},removePoiMainCache:function(){return sessionStorage.removeItem(this.getPoiMainCacheKey())},getPoiMainCacheKey:function(){return"SESSION_STORAGE_POIDATA_MAIN_"+
$("#poikey").val()},setPoiMenuCache:function(a){sessionStorage.setItem(this.getPoiMenuCacheKey(),a)},getPoiMenuCache:function(){return sessionStorage.getItem(this.getPoiMenuCacheKey())},removePoiMenuCache:function(){return sessionStorage.removeItem(this.getPoiMenuCacheKey())},getPoiMenuCacheKey:function(){return"SESSION_STORAGE_ADSDATA_MENU"},setPoiDealCache:function(a){sessionStorage.setItem(this.getPoiDealCacheKey(),a)},getPoiDealCache:function(){return sessionStorage.getItem(this.getPoiDealCacheKey())},
removePoiDealCache:function(){return sessionStorage.removeItem(this.getPoiDealCacheKey())},getPoiDealCacheKey:function(){return"SESSION_STORAGE_ADSDATA_DEAL"}};var PoiCacheHelper=new PoiCache;
